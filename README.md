# server_1s

# Подготовка  
Сервер разбит на 3 части:
База данных
Сервер 1с
Сервер активации

Это нужно чтобы каждый блок был установлен на разных виртуальных машинах. В случае, если планируется держать сервер на одной виртуальной машине, есть объединенный файл docker-compouser и init скрипт. Но такой режим рекомендуется использовать для тестовых целей.

В качестве базы данных используется Postgresql. 
Сервер принимает 3 переменные в файле .env:
TZ - Часовой пояс в формате Europe/Moscow
PASS - пароль пользователя postgres (Пароль хранится в открытом виде!)
SHEDULE - расписание выполнения бекапов в формате cron 
Сервер резервирует стандартный порт 5432.
Серверу требуются 3 директории:
/_1s/root - директория хранения cron скриптов
/_1s/bd - файлы базы данных. Они вынесены из образа чтобы база не очищалась при пересборке образа.
/_1s/backup - место хранения бекапов. По умолчанию бекапы старше 3-х лет стераются.
Для подготовки папок и файлов можно использовать init.sh скрипт.
chmod +x ./
